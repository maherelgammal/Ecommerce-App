{"version":3,"file":"static/js/1231.cf14a508.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/2d/layers/MapImageLayerView2D.js","../node_modules/@arcgis/core/views/layers/MapImageLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import e from\"../../../core/Logger.js\";import{isAbortError as i}from\"../../../core/promiseUtils.js\";import{watch as r}from\"../../../core/reactiveUtils.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import{GraphicsCollection as h}from\"../../../support/GraphicsCollection.js\";import{BitmapContainer as o}from\"../engine/BitmapContainer.js\";import{LayerView2DMixin as p}from\"./LayerView2D.js\";import g from\"./graphics/GraphicsView2D.js\";import n from\"./graphics/HighlightGraphicContainer.js\";import l from\"./support/ExportStrategy.js\";import m from\"../../layers/LayerView.js\";import c from\"../../layers/MapImageLayerView.js\";import d from\"../../layers/RefreshableLayerView.js\";import{MapServiceLayerViewHelper as u}from\"../../layers/support/MapServiceLayerViewHelper.js\";import{createQueryGeometry as y}from\"../../support/drapedUtils.js\";let f=class extends(c(d(p(m)))){constructor(){super(...arguments),this._highlightGraphics=new h,this._updateHash=\"\"}fetchPopupFeatures(t,e){return this._popupHighlightHelper.fetchPopupFeatures(t,e)}update(t){const r=`${this.exportImageVersion}/${t.state.id}/${t.pixelRatio}/${t.stationary}`;this._updateHash!==r&&(this._updateHash=r,this.strategy.update(t).catch((t=>{i(t)||e.getLogger(this.declaredClass).error(t)})),t.stationary&&this._popupHighlightHelper.updateHighlightedFeatures(t.state.resolution)),this._highlightView.processUpdate(t)}attach(){const{imageMaxWidth:t,imageMaxHeight:e,version:i}=this.layer,s=i>=10.3,a=i>=10;this._bitmapContainer=new o,this.container.addChild(this._bitmapContainer),this._highlightView=new g({view:this.view,graphics:this._highlightGraphics,requestUpdateCallback:()=>this.requestUpdate(),container:new n(this.view.featuresTilingScheme),defaultPointSymbolEnabled:!1}),this.container.addChild(this._highlightView.container),this._popupHighlightHelper=new u({createFetchPopupFeaturesQueryGeometry:(t,e)=>y(t,e,this.view),highlightGraphics:this._highlightGraphics,highlightGraphicUpdated:(t,e)=>{this._highlightView.graphicUpdateHandler({graphic:t,property:e})},layerView:this,updatingHandles:this.updatingHandles}),this.strategy=new l({container:this._bitmapContainer,fetchSource:this.fetchImageBitmap.bind(this),requestUpdate:this.requestUpdate.bind(this),imageMaxWidth:t,imageMaxHeight:e,imageRotationSupported:s,imageNormalizationSupported:a,hidpi:!0}),this.addAttachHandles(r((()=>this.exportImageVersion),(()=>this.requestUpdate()))),this.requestUpdate()}detach(){this.strategy.destroy(),this.container.removeAllChildren(),this._bitmapContainer.removeAllChildren(),this._highlightView.destroy(),this._popupHighlightHelper.destroy()}moveStart(){}viewChange(){}moveEnd(){this.requestUpdate()}supportsSpatialReference(t){return this.layer.serviceSupportsSpatialReference(t)}async doRefresh(){this._updateHash=\"\",this.requestUpdate()}isUpdating(){return this.strategy.updating||this.updateRequested}fetchImage(t,e,i,r){return this.layer.fetchImage(t,e,i,{timeExtent:this.timeExtent,floors:this.floors,...r})}fetchImageBitmap(t,e,i,r){return this.layer.fetchImageBitmap(t,e,i,{timeExtent:this.timeExtent,floors:this.floors,...r})}highlight(t){return this._popupHighlightHelper.highlight(t)}};t([s()],f.prototype,\"strategy\",void 0),t([s()],f.prototype,\"updating\",void 0),f=t([a(\"esri.views.2d.layers.MapImageLayerView2D\")],f);const w=f;export{w as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import{combinedViewLayerTimeExtentProperty as o}from\"../../layers/support/commonProperties.js\";import{ExportImageParameters as s}from\"../../layers/support/ExportImageParameters.js\";const p=p=>{let a=class extends p{initialize(){this.exportImageParameters=new s({layer:this.layer})}destroy(){this.exportImageParameters.destroy(),this.exportImageParameters=null}get floors(){return this.view?.floors??null}get exportImageVersion(){return this.exportImageParameters?.commitProperty(\"version\"),this.commitProperty(\"timeExtent\"),this.commitProperty(\"floors\"),(this._get(\"exportImageVersion\")||0)+1}canResume(){return!!super.canResume()&&!this.timeExtent?.isEmpty}};return e([r()],a.prototype,\"exportImageParameters\",void 0),e([r({readOnly:!0})],a.prototype,\"floors\",null),e([r({readOnly:!0})],a.prototype,\"exportImageVersion\",null),e([r()],a.prototype,\"layer\",void 0),e([r()],a.prototype,\"suspended\",void 0),e([r(o)],a.prototype,\"timeExtent\",void 0),a=e([t(\"esri.views.layers.MapImageLayerView\")],a),a};export{p as default};\n"],"names":["f","_c","_inherits","_super","_createSuper","_this","_classCallCheck","apply","arguments","_highlightGraphics","h","_updateHash","_createClass","key","value","t","e","this","_popupHighlightHelper","fetchPopupFeatures","_this2","r","concat","exportImageVersion","state","id","pixelRatio","stationary","strategy","update","catch","i","declaredClass","error","updateHighlightedFeatures","resolution","_highlightView","processUpdate","_this3","_this$layer","layer","imageMaxWidth","imageMaxHeight","version","s","a","_bitmapContainer","o","container","addChild","g","view","graphics","requestUpdateCallback","requestUpdate","n","featuresTilingScheme","defaultPointSymbolEnabled","u","createFetchPopupFeaturesQueryGeometry","y","highlightGraphics","highlightGraphicUpdated","graphicUpdateHandler","graphic","property","layerView","updatingHandles","l","fetchSource","fetchImageBitmap","bind","imageRotationSupported","imageNormalizationSupported","hidpi","addAttachHandles","destroy","removeAllChildren","serviceSupportsSpatialReference","_doRefresh","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","stop","updating","updateRequested","fetchImage","_objectSpread","timeExtent","floors","highlight","p","_p","exportImageParameters","get","_this$view$floors","_this$view","_this$exportImagePara","commitProperty","_get","_this$timeExtent","_getPrototypeOf","prototype","call","isEmpty","readOnly","c","d","m","w"],"sourceRoot":""}