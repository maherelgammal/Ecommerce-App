{"version":3,"file":"static/js/9634.370d4663.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/portal/support/resourceUtils.js","../node_modules/@arcgis/core/webdoc/support/saveUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import t from\"../../core/Error.js\";import{get as r,isSome as a,isNone as o}from\"../../core/maybe.js\";import{join as s,getPathExtension as n}from\"../../core/urlUtils.js\";async function c(e,t={},a){await e.load(a);const o=s(e.itemUrl,\"resources\"),{start:n=1,num:c=10,sortOrder:u=\"asc\",sortField:i=\"created\"}=t,l={query:{start:n,num:c,sortOrder:u,sortField:i,token:e.apiKey},signal:r(a,\"signal\")},p=await e.portal.request(o,l);return{total:p.total,nextStart:p.nextStart,resources:p.resources.map((({created:t,size:r,resource:a})=>({created:new Date(t),size:r,resource:e.resourceFromPath(a)})))}}async function u(e,o,n,c){if(!e.hasPath())throw new t(`portal-item-resource-${o}:invalid-path`,\"Resource does not have a valid path\");const u=e.portalItem;await u.load(c);const i=s(u.userItemUrl,\"add\"===o?\"addResources\":\"updateResources\"),[l,d]=p(e.path),m=await h(n),f=new FormData;return l&&\".\"!==l&&f.append(\"resourcesPrefix\",l),a(c)&&c.compress&&f.append(\"compress\",\"true\"),f.append(\"fileName\",d),f.append(\"file\",m,d),f.append(\"f\",\"json\"),a(c)&&c.access&&f.append(\"access\",c.access),await u.portal.request(i,{method:\"post\",body:f,signal:r(c,\"signal\")}),e}async function i(e,a,o){if(!a.hasPath())throw new t(\"portal-item-resources-remove:invalid-path\",\"Resource does not have a valid path\");await e.load(o);const n=s(e.userItemUrl,\"removeResources\");await e.portal.request(n,{method:\"post\",query:{resource:a.path},signal:r(o,\"signal\")}),a.portalItem=null}async function l(e,t){await e.load(t);const a=s(e.userItemUrl,\"removeResources\");return e.portal.request(a,{method:\"post\",query:{deleteAll:!0},signal:r(t,\"signal\")})}function p(e){const t=e.lastIndexOf(\"/\");return-1===t?[\".\",e]:[e.slice(0,t),e.slice(t+1)]}function d(e){const[t,r]=m(e),[a,o]=p(t);return[a,o,r]}function m(e){const t=n(e);return o(t)?[e,\"\"]:[e.slice(0,e.length-t.length-1),`.${t}`]}async function h(t){if(t instanceof Blob)return t;return(await e(t.url,{responseType:\"blob\"})).data}function f(e,t){if(!e.hasPath())return null;const[r,,a]=d(e.path);return e.portalItem.resourceFromPath(s(r,t+a))}function w(e,t){if(!e.hasPath())return null;const[r,,a]=d(e.path);return e.portalItem.resourceFromPath(s(r,t+a))}export{u as addOrUpdateResource,h as contentToBlob,c as fetchResources,f as getSiblingOfSameType,w as getSiblingOfSameTypeI,l as removeAllResources,i as removeResource,d as splitPrefixFileNameAndExtension};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{result as r}from\"../../core/asyncUtils.js\";import e from\"../../core/Error.js\";import{isSome as o}from\"../../core/maybe.js\";import{eachAlways as t,throwIfAborted as s}from\"../../core/promiseUtils.js\";import{generateUUID as c}from\"../../core/uuid.js\";import{getSiblingOfSameTypeI as p}from\"../../portal/support/resourceUtils.js\";async function a(r,o,a){if(!o||!o.resources)return;const h=o.portalItem===r.portalItem?new Set(r.paths):new Set;r.paths.length=0,r.portalItem=o.portalItem;const i=new Set(o.resources.toKeep.map((r=>r.resource.path))),m=new Set,f=[];i.forEach((e=>{h.delete(e),r.paths.push(e)}));for(const e of o.resources.toUpdate)if(h.delete(e.resource.path),i.has(e.resource.path)||m.has(e.resource.path)){const{resource:o,content:t,finish:s,error:u}=e,h=p(o,c());r.paths.push(h.path),f.push(n({resource:h,content:t,compress:e.compress,finish:s,error:u},a))}else r.paths.push(e.resource.path),f.push(u(e,a)),m.add(e.resource.path);for(const e of o.resources.toAdd)f.push(n(e,a)),r.paths.push(e.resource.path);if(h.forEach((r=>{if(o.portalItem){const e=o.portalItem.resourceFromPath(r);f.push(e.portalItem.removeResource(e).catch((()=>{})))}})),0===f.length)return;const l=await t(f);s(a);const d=l.filter((r=>\"error\"in r)).map((r=>r.error));if(d.length>0)throw new e(\"save:resources\",\"Failed to save one or more resources\",{errors:d})}async function n(e,t){const s={...o(t)?t:{},compress:e.compress},c=await r(e.resource.portalItem.addResource(e.resource,e.content,s));if(!0!==c.ok)throw e.error?.(c.error),c.error;e.finish?.(e.resource)}async function u(e,o){const t=await r(e.resource.update(e.content,o));if(!0!==t.ok)throw e.error?.(t.error),t.error;e.finish?.(e.resource)}export{a as saveResources};\n"],"names":["c","_x","_c","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","t","a","o","_t$start","n","_t$num","_t$sortOrder","u","_t$sortField","l","p","_args","wrap","_context","prev","next","length","undefined","load","s","itemUrl","start","num","sortOrder","sortField","query","token","apiKey","signal","r","portal","request","sent","abrupt","total","nextStart","resources","map","_ref","created","size","resource","Date","resourceFromPath","stop","_x2","_x3","_x4","_x5","_u","_callee2","i","_p3","_p4","d","m","f","_context2","hasPath","concat","portalItem","userItemUrl","path","_slicedToArray","h","FormData","append","compress","access","method","body","_x6","_x7","_x8","_i","_callee3","_context3","_x9","_x10","_l","_callee4","_context4","deleteAll","lastIndexOf","slice","_m","_m2","_p","_p2","_x11","_h","_callee5","_context5","Blob","url","responseType","data","_d","_d2","w","_d3","_d4","_a","_iterator","_step","_e2","_o","_t","_s","_u2","_iterator2","_step2","_e3","Set","paths","toKeep","forEach","delete","push","_createForOfIteratorHelper","toUpdate","done","value","has","content","finish","error","add","err","toAdd","removeResource","catch","filter","errors","_n","_e$error","_e$finish","_objectSpread","addResource","ok","call","_e$error2","_e$finish2","update"],"sourceRoot":""}