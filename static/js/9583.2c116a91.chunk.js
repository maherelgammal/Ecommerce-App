"use strict";(self.webpackChunkfresh_cart=self.webpackChunkfresh_cart||[]).push([[9583],{82582:function(e,r,t){t.d(r,{dp:function(){return o},yZ:function(){return n}});var a=t(68860),i=96;function n(e,r){var t=r||e.extent,n=e.width,o=(0,a.c9)(t&&t.spatialReference);return t&&n?t.width/n*o*a.hd*i:0}function o(e,r){return e/((0,a.c9)(r)*a.hd*i)}},19583:function(e,r,t){t.r(r),t.d(r,{default:function(){return Q}});var a=t(74165),i=t(15861),n=t(1413),o=t(15671),s=t(43144),u=t(60136),l=t(29388),p=t(27366),c=t(76200),d=t(62044),y=t(10064),h=t(41691),v=t(93002),f=t(92026),m=t(97642),b=t(66978),g=t(49861),Z=t(25243),x=(t(63780),t(38511)),w=t(69912),k=t(31201),_=t(25265),S=t(53866),C=t(82582),I=t(30651),O=t(27961),R=t(6741),M=t(11936),T=t(6693),E=t(46671),L=t(6061),N=t(29598),P=t(71684),F=t(56811),j=t(18870),J=t(99063),q=t(45948),U=t(44041),A=t(83690),V=t(77990),z=t(58132),D=t(26704),G=t(16354),H=function(e){(0,u.Z)(t,e);var r=(0,l.Z)(t);function t(){var e;(0,o.Z)(this,t);for(var a=arguments.length,i=new Array(a),n=0;n<a;n++)i[n]=arguments[n];return(e=r.call.apply(r,[this].concat(i))).dateFieldsTimeReference=null,e.datesInUnknownTimezone=!1,e.dpi=96,e.gdbVersion=null,e.imageFormat="png24",e.imageMaxHeight=2048,e.imageMaxWidth=2048,e.imageTransparency=!0,e.isReference=null,e.labelsVisible=!1,e.operationalLayerType="ArcGISMapServiceLayer",e.preferredTimeReference=null,e.sourceJSON=null,e.sublayers=null,e.type="map-image",e.url=null,e}return(0,s.Z)(t,[{key:"normalizeCtorArgs",value:function(e,r){return"string"==typeof e?(0,n.Z)({url:e},r):e}},{key:"load",value:function(e){var r=this,t=(0,f.pC)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).catch(b.r9).then((function(){return r._fetchService(t)}))),Promise.resolve(this)}},{key:"readImageFormat",value:function(e,r){var t=r.supportedImageFormatTypes;return t&&t.includes("PNG32")?"png32":"png24"}},{key:"writeSublayers",value:function(e,r,t,a){var i;if(this.loaded&&e){var o=e.slice().reverse().flatten((function(e){var r=e.sublayers;return r&&r.toArray().reverse()})).toArray(),s=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&null!==(i=this.capabilities.exportMap)&&void 0!==i&&i.supportsDynamicLayers){var u=(0,_.M9)(a.origin);if(u===_.s3.PORTAL_ITEM){var l=this.createSublayersForOrigin("service").sublayers;s=(0,z.QV)(o,l,_.s3.SERVICE)}else if(u>_.s3.PORTAL_ITEM){var p=this.createSublayersForOrigin("portal-item");s=(0,z.QV)(o,p.sublayers,(0,_.M9)(p.origin))}}var c=[],d=(0,n.Z)({writeSublayerStructure:s},a),y=s;o.forEach((function(e){var r=e.write({},d);c.push(r),y=y||"user"===e.originOf("visible")})),c.some((function(e){return Object.keys(e).length>1}))&&(r.layers=c),y&&(r.visibleLayers=o.filter((function(e){return e.visible})).map((function(e){return e.id})))}}},{key:"createExportImageParameters",value:function(e,r,t,a){var i=a&&a.pixelRatio||1;e&&this.version>=10&&(e=e.clone().shiftCentralMeridian());var o=new U.R({layer:this,floors:null===a||void 0===a?void 0:a.floors,scale:(0,C.yZ)({extent:e,width:r})*i}),s=o.toJSON();o.destroy();var u=!a||!a.rotation||this.version<10.3?{}:{rotation:-a.rotation},l=e&&e.spatialReference,p=l.wkid||JSON.stringify(l.toJSON());s.dpi*=i;var c={};if(null!==a&&void 0!==a&&a.timeExtent){var d=a.timeExtent.toJSON(),y=d.start,h=d.end;c.time=y&&h&&y===h?""+y:"".concat(null!==y&&void 0!==y?y:"null",",").concat(null!==h&&void 0!==h?h:"null")}else this.timeInfo&&!this.timeInfo.hasLiveData&&(c.time="null,null");return(0,n.Z)((0,n.Z)((0,n.Z)({bbox:e&&e.xmin+","+e.ymin+","+e.xmax+","+e.ymax,bboxSR:p,imageSR:p,size:r+","+t},s),u),c)}},{key:"fetchImage",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r,t,i,n){var o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchImage("image",r,t,i,n);case 2:return o=e.sent,s=o.data,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e,this)})));return function(r,t,a,i){return e.apply(this,arguments)}}()},{key:"fetchImageBitmap",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r,t,i,n){var o,s,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchImage("blob",r,t,i,n);case 2:return o=e.sent,s=o.data,u=o.url,e.abrupt("return",(0,A.g)(s,u));case 6:case"end":return e.stop()}}),e,this)})));return function(r,t,a,i){return e.apply(this,arguments)}}()},{key:"fetchRecomputedExtents",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var r,t,i,o,s,u,l,p,y=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.length>0&&void 0!==y[0]?y[0]:{},t=(0,n.Z)((0,n.Z)({},r),{},{query:(0,n.Z)((0,n.Z)({returnUpdates:!0,f:"json"},this.customParameters),{},{token:this.apiKey})}),e.next=4,(0,c.default)(this.url,t);case 4:return i=e.sent,o=i.data,s=o.extent,u=o.fullExtent,l=o.timeExtent,p=s||u,e.abrupt("return",{fullExtent:p&&S.Z.fromJSON(p),timeExtent:l&&d.Z.fromJSON({start:l[0],end:l[1]})});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadAll",value:function(){var e=this;return(0,v.G)(this,(function(r){r(e.allSublayers)}))}},{key:"serviceSupportsSpatialReference",value:function(e){return(0,D.D)(this,e)}},{key:"_fetchImage",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r,t,i,o,s){var u,l,p,d,h,v,f,m;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h={responseType:r,signal:null!==(u=null===s||void 0===s?void 0:s.signal)&&void 0!==u?u:null,query:(0,n.Z)((0,n.Z)((0,n.Z)((0,n.Z)((0,n.Z)({},this.parsedUrl.query),this.createExportImageParameters(t,i,o,s)),{},{f:"image"},this.refreshParameters),this.customParameters),{},{token:this.apiKey})},v=this.parsedUrl.path+"/export",null==(null===(l=h.query)||void 0===l?void 0:l.dynamicLayers)||null!==(p=this.capabilities)&&void 0!==p&&null!==(d=p.exportMap)&&void 0!==d&&d.supportsDynamicLayers){e.next=3;break}throw new y.Z("mapimagelayer:dynamiclayer-not-supported","service ".concat(this.url," doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source."),{query:h.query});case 3:return e.prev=3,e.next=6,(0,c.default)(v,h);case 6:return f=e.sent,m=f.data,e.abrupt("return",{data:m,url:v});case 11:if(e.prev=11,e.t0=e.catch(3),!(0,b.D_)(e.t0)){e.next=15;break}throw e.t0;case 15:throw new y.Z("mapimagelayer:image-fetch-error","Unable to load image: ".concat(v),{error:e.t0});case 16:case"end":return e.stop()}}),e,this,[[3,11]])})));return function(r,t,a,i,n){return e.apply(this,arguments)}}()},{key:"_fetchService",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var t,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.sourceJSON){e.next=2;break}return e.abrupt("return",void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl}));case 2:return e.next=4,(0,c.default)(this.parsedUrl.path,{query:(0,n.Z)((0,n.Z)((0,n.Z)({f:"json"},this.parsedUrl.query),this.customParameters),{},{token:this.apiKey}),signal:r});case 4:t=e.sent,i=t.data,t.ssl&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=i,this.read(i,{origin:"service",url:this.parsedUrl});case 8:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()}]),t}((0,T.h)((0,J.n)((0,F.M)((0,j.x)((0,R.O)((0,M.Y)((0,L.q)((0,N.I)((0,m.R)((0,P.Q)((0,O.V)((0,E.N)((0,h.p)(I.Z))))))))))))));(0,p._)([(0,g.Cb)({type:G.Z})],H.prototype,"dateFieldsTimeReference",void 0),(0,p._)([(0,g.Cb)({type:Boolean})],H.prototype,"datesInUnknownTimezone",void 0),(0,p._)([(0,g.Cb)()],H.prototype,"dpi",void 0),(0,p._)([(0,g.Cb)()],H.prototype,"gdbVersion",void 0),(0,p._)([(0,g.Cb)()],H.prototype,"imageFormat",void 0),(0,p._)([(0,x.r)("imageFormat",["supportedImageFormatTypes"])],H.prototype,"readImageFormat",null),(0,p._)([(0,g.Cb)({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],H.prototype,"imageMaxHeight",void 0),(0,p._)([(0,g.Cb)({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],H.prototype,"imageMaxWidth",void 0),(0,p._)([(0,g.Cb)()],H.prototype,"imageTransparency",void 0),(0,p._)([(0,g.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}}})],H.prototype,"isReference",void 0),(0,p._)([(0,g.Cb)({json:{read:!1,write:!1}})],H.prototype,"labelsVisible",void 0),(0,p._)([(0,g.Cb)({type:["ArcGISMapServiceLayer"]})],H.prototype,"operationalLayerType",void 0),(0,p._)([(0,g.Cb)({json:{read:!1,write:!1}})],H.prototype,"popupEnabled",void 0),(0,p._)([(0,g.Cb)({type:G.Z})],H.prototype,"preferredTimeReference",void 0),(0,p._)([(0,g.Cb)()],H.prototype,"sourceJSON",void 0),(0,p._)([(0,g.Cb)({json:{write:{ignoreOrigin:!0}}})],H.prototype,"sublayers",void 0),(0,p._)([(0,k.c)("sublayers",{layers:{type:[V.Z]},visibleLayers:{type:[Z.z8]}})],H.prototype,"writeSublayers",null),(0,p._)([(0,g.Cb)({type:["show","hide","hide-children"]})],H.prototype,"listMode",void 0),(0,p._)([(0,g.Cb)({json:{read:!1},readOnly:!0,value:"map-image"})],H.prototype,"type",void 0),(0,p._)([(0,g.Cb)(q.HQ)],H.prototype,"url",void 0);var Q=H=(0,p._)([(0,w.j)("esri.layers.MapImageLayer")],H)}}]);
//# sourceMappingURL=9583.2c116a91.chunk.js.map